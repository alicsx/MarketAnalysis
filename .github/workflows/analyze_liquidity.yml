# ูุงู Workflow ฺฉู ุฏุฑ ุชุจ Actions ฺฏุชโูุงุจ ููุงุด ุฏุงุฏู ูโุดูุฏ
name: Analyze Daily Liquidity

# ุชุฑฺฏุฑูุง: ฺู ุฒูุงู ุงู Workflow ุงุฌุฑุง ุดูุฏ
on:
  # ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุฑูุฒุงูู ุฏุฑ ุณุงุนุช ฒ ุจุงูุฏุงุฏ ุจู ููุช ุฌูุงู (UTC)
  schedule:
    - cron: '0 2 * * *'
  
  # ุงุฌุงุฒู ุงุฌุฑุง ุฏุณุช ุงุฒ ุทุฑู ุตูุญู Actions ุฏุฑ ฺฏุชโูุงุจ
  workflow_dispatch:

# ุชุนุฑู ฺฉุงุฑูุง (Jobs) ฺฉู ุจุงุฏ ุงูุฌุงู ุดููุฏ
jobs:
  analyze-and-commit:
    # ุงุณุชูุงุฏู ุงุฒ ุขุฎุฑู ูุณุฎู ุงูุจููุชู ุจุฑุง ุงุฌุฑุง
    runs-on: ubuntu-latest

    # ูุฑุงุญู ุงุฌุฑุง ฺฉุงุฑ
    steps:
      # ูุฑุญูู ฑ: ุฏุงูููุฏ ฺฉุฑุฏู ฺฉุฏูุง ุฑูพุงุฒุชูุฑ ุดูุง ุจู ูุงุดู ูุฌุงุฒ
      - name: Check out repository code
        uses: actions/checkout@v4

      # ูุฑุญูู ฒ: ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ูพุงุชูู ูุณุฎู 3.10
      - name: Set up Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      
      # ูุฑุญูู ณ: ูุตุจ ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ ุงุณฺฉุฑูพุช ูพุงุชูู
      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install yfinance pandas scipy
      
      # ูุฑุญูู ด: ุงุฌุฑุง ุงุณฺฉุฑูพุช ุงุตู ุชุญููฺฏุฑ ููุฏูฺฏ
      - name: Run liquidity analyzer script
        run: python liquidity_analyzer.py
        
      # ูุฑุญูู ต: ฺฉุงูุช ู ูพูุด ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ ูุงู ุชููุฏ ุดุฏู (liquidity_levels.txt)
      # ุงู ุงฺฉุดู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุชุบุฑุงุช ุฑุง ุชุดุฎุต ุฏุงุฏู ู ุจู ุฑูพุงุฒุชูุฑ ุดูุง ฺฉุงูุช ูโฺฉูุฏ
      - name: Commit and push if it changed
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          # ูพุงู ฺฉู ุจุฑุง ฺฉุงูุช ุซุจุช ูโุดูุฏ
          commit_message: '๐  (Automated) Update daily liquidity levels'
          # ูุงู ฺฉู ุจุงุฏ ฺฉุงูุช ุดูุฏ
          file_pattern: liquidity_levels.txt
